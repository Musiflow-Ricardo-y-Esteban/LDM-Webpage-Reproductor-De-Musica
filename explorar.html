<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MusiFlow - Explorar</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- AOS Animation Library -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
    
    <!-- CSS personalizado -->
    <link href="resources/css/header.css" rel="stylesheet">
    <link href="resources/css/main.css" rel="stylesheet">
    <link href="resources/css/reproductor.css" rel="stylesheet">
    <link href="resources/css/animaciones.css" rel="stylesheet">
    <link href="resources/css/footer.css" rel="stylesheet">
    <link href="resources/css/misc.css" rel="stylesheet">
    <link href="resources/css/asistente.css" rel="stylesheet">
    <link href="resources/css/explorar.css" rel="stylesheet">
</head>
<body>
    <!-- Efecto de cursor brillante -->
    <div class="glowing-cursor"></div>
    
    <!-- Navegación -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">MusiFlow</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html"><i class="fas fa-home"></i> Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="explorar.html"><i class="fas fa-compass"></i> Explorar</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#biblioteca"><i class="fas fa-book"></i> Biblioteca</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#premium"><i class="fas fa-crown"></i> Premium</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="login.html" id="loginLink"><i class="fas fa-sign-in-alt"></i> Ingresar</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- Header de Explorar -->
    <section class="explore-header">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center">
                    <h1 class="hero-title">Explora nueva música</h1>
                    <p class="hero-subtitle">Descubre canciones, artistas y géneros que te encantarán</p>
                    <!-- API Status Indicator -->
                    <div id="spotifyStatus" class="mt-3">
                        <div class="alert alert-info d-inline-block" role="alert">
                            <i class="fas fa-music fa-lg me-2" style="color: #1db954;"></i>
                            <span id="statusText">Conectando con APIs de música...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Sección de Búsqueda -->
    <section class="search-section">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="search-box" style="position: relative;">
                        <input type="text" class="search-input" id="searchInput" placeholder="Busca canciones, artistas o álbumes...">
                        <button class="search-btn" id="searchBtn">
                            <i class="fas fa-search"></i>
                        </button>
                        <!-- Search suggestions will be inserted here -->
                    </div>
                    <div class="text-center mt-3">
                        <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            Búsqueda potenciada por múltiples fuentes musicales
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección de Música Destacada (Añadida) -->
    <section id="featuredSection" class="features-section" style="display: none; padding: 4rem 0; background: var(--oscuro-secundario);">
        <div class="container">
            <!-- Content will be loaded dynamically -->
        </div>
    </section>
    
    <!-- Sección de Géneros -->
    <section class="genres-section">
        <div class="container">
            <h2 class="section-title text-center" data-aos="fade-up">Géneros Populares</h2>
            <div class="row g-4" id="genresContainer">
                <div class="col-md-4 col-lg-3" data-aos="fade-up" data-aos-delay="100">
                    <div class="genre-card ripple-effect" onclick="searchByGenre('pop')">
                        <div class="genre-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3 class="genre-name">Pop</h3>
                    </div>
                </div>
                <div class="col-md-4 col-lg-3" data-aos="fade-up" data-aos-delay="200">
                    <div class="genre-card ripple-effect" onclick="searchByGenre('rock')">
                        <div class="genre-icon">
                            <i class="fas fa-guitar"></i>
                        </div>
                        <h3 class="genre-name">Rock</h3>
                    </div>
                </div>
                <div class="col-md-4 col-lg-3" data-aos="fade-up" data-aos-delay="300">
                    <div class="genre-card ripple-effect" onclick="searchByGenre('electronic')">
                        <div class="genre-icon">
                            <i class="fas fa-headphones"></i>
                        </div>
                        <h3 class="genre-name">Electrónica</h3>
                    </div>
                </div>
                <div class="col-md-4 col-lg-3" data-aos="fade-up" data-aos-delay="400">
                    <div class="genre-card ripple-effect" onclick="searchByGenre('reggaeton')">
                        <div class="genre-icon">
                            <i class="fas fa-music"></i>
                        </div>
                        <h3 class="genre-name">Reggaeton</h3>
                    </div>
                </div>
                <div class="col-md-4 col-lg-3" data-aos="fade-up" data-aos-delay="500">
                    <div class="genre-card ripple-effect" onclick="searchByGenre('jazz')">
                        <div class="genre-icon">
                            <i class="fas fa-saxophone"></i>
                        </div>
                        <h3 class="genre-name">Jazz</h3>
                    </div>
                </div>
                <div class="col-md-4 col-lg-3" data-aos="fade-up" data-aos-delay="600">
                    <div class="genre-card ripple-effect" onclick="searchByGenre('classical')">
                        <div class="genre-icon">
                            <i class="fas fa-violin"></i>
                        </div>
                        <h3 class="genre-name">Clásica</h3>
                    </div>
                </div>
                <div class="col-md-4 col-lg-3" data-aos="fade-up" data-aos-delay="700">
                    <div class="genre-card ripple-effect" onclick="searchByGenre('hip-hop')">
                        <div class="genre-icon">
                            <i class="fas fa-microphone"></i>
                        </div>
                        <h3 class="genre-name">Hip-Hop</h3>
                    </div>
                </div>
                <div class="col-md-4 col-lg-3" data-aos="fade-up" data-aos-delay="800">
                    <div class="genre-card ripple-effect" onclick="searchByGenre('country')">
                        <div class="genre-icon">
                            <i class="fas fa-hat-cowboy"></i>
                        </div>
                        <h3 class="genre-name">Country</h3>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Sección de Resultados -->
    <section class="results-section" id="resultsSection" style="display: none;">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="section-title mb-0">Resultados</h2>
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-outline-light" id="viewListBtn" onclick="setViewMode('list')">
                        <i class="fas fa-list"></i> Lista
                    </button>
                    <button type="button" class="btn btn-outline-light" id="viewGridBtn" onclick="setViewMode('grid')">
                        <i class="fas fa-th"></i> Cuadrícula
                    </button>
                </div>
            </div>
            <div id="searchResults" class="search-results-container">
                <!-- Los resultados se mostrarán aquí -->
            </div>
            <div class="text-center mt-4" id="loadMoreContainer" style="display: none;">
                <button class="btn btn-outline-light" id="loadMoreBtn" onclick="loadMoreResults()">
                    <i class="fas fa-plus"></i> Cargar más resultados
                </button>
            </div>
        </div>
    </section>
    
    <!-- Reproductor Fijo Mejorado -->
    <div class="current-player" id="currentPlayer" style="display: none;">
        <div class="player-info-section">
            <div class="current-track-info">
                <img src="/api/placeholder/50/50" alt="Track" class="current-track-image" id="currentTrackImage">
               <div class="current-track-details">
                   <h5 id="currentTrackName">Selecciona una canción</h5>
                   <p id="currentTrackArtist">Para comenzar</p>
               </div>
           </div>
           <button class="btn btn-sm btn-outline-light d-none d-md-block" id="addToFavoritesBtn" title="Agregar a favoritos">
               <i class="fas fa-heart"></i>
           </button>
       </div>
       
       <div class="player-controls-section">
           <div class="player-controls-current">
               <button class="control-btn-current" id="shuffleBtn" title="Aleatorio">
                   <i class="fas fa-random"></i>
               </button>
               <button class="control-btn-current" id="prevBtn">
                   <i class="fas fa-step-backward"></i>
               </button>
               <button class="control-btn-current play-btn-current" id="playPauseBtn">
                   <i class="fas fa-play"></i>
               </button>
               <button class="control-btn-current" id="nextBtn">
                   <i class="fas fa-step-forward"></i>
               </button>
               <button class="control-btn-current" id="repeatBtn" title="Repetir">
                   <i class="fas fa-redo"></i>
               </button>
           </div>
           <div class="player-time-info" style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
               <span id="currentTime" class="time-display">0:00</span>
               <div class="progress-bar-container" style="flex-grow: 1; height: 5px; background: rgba(255,255,255,0.2); border-radius: 5px; cursor: pointer;" onclick="seekTo(event)">
                   <div id="progressBarMain" style="height: 100%; background: var(--acento-actual); border-radius: 5px; width: 0%;"></div>
               </div>
               <span id="totalTime" class="time-display">0:00</span>
           </div>
       </div>
       
       <div class="player-actions-section">
           <div class="volume-current" id="volumeSlider" style="display: flex; align-items: center; gap: 10px;">
               <i class="fas fa-volume-up"></i>
               <div class="volume-slider-container" style="width: 100px; height: 5px; background: rgba(255,255,255,0.2); border-radius: 5px; cursor: pointer;" onclick="window.musicExplorer.setVolume(event)">
                   <div id="volumeProgress" style="height: 100%; background: var(--acento-actual); border-radius: 5px; width: 50%;"></div>
               </div>
           </div>
           <button class="control-btn-current" id="openExternalBtn" style="display: none;" title="Abrir enlace externo">
               <i class="fas fa-external-link-alt"></i>
           </button>
           <button class="control-btn-current" id="recommendationsBtn" title="Recomendaciones" onclick="window.musicExplorer.getRecommendations()">
               <i class="fas fa-magic"></i>
           </button>
       </div>
   </div>

   <!-- Floating chat button -->
   <div class="music-assistant-button" id="musicAssistantButton">
       <i>🎵</i>
   </div>

   <!-- Chat modal -->
   <div class="music-assistant-modal" id="musicAssistantModal">
       <div class="neon-decoration"></div>
       <div class="neon-decoration"></div>
       <div class="neon-decoration"></div>
       <div class="sparkle-effect"></div>
       <div class="assistant-header">
           <h1 class="assistant-title">MusicGPT</h1>
           <p class="assistant-description">Tu asistente musical inteligente</p>
           <button class="close-button" id="closeButton">×</button>
       </div>
       <div class="assistant-chat-container">
           <div class="assistant-chat-messages" id="chatMessages"></div>
           <div class="typing-indicator" id="typingIndicator">
               <div class="typing-indicator-content">
                   <span>MusicGPT está escribiendo</span>
                   <span class="dot"></span><span class="dot"></span><span class="dot"></span>
               </div>
           </div>
       </div>
       <div class="assistant-input-area">
           <input type="text" class="assistant-input" id="assistantInput" placeholder="Pregúntame sobre música...">
           <button class="assistant-send-button" id="sendButton"><i>➤</i></button>
       </div>
   </div>

   <!-- Footer -->
   <footer class="footer">
       <div class="container">
           <div class="row">
               <div class="col-md-6 mb-4">
                   <h5 class="footer-title">MusiFlow</h5>
                   <p>La mejor plataforma para descubrir música nueva.</p>
               </div>
               <div class="col-md-6 mb-4">
                   <h5 class="footer-title">Enlaces</h5>
                   <ul class="footer-links">
                       <li><a href="index.html">Inicio</a></li>
                       <li><a href="explorar.html">Explorar</a></li>
                       <li><a href="login.html">Ingresar</a></li>
                   </ul>
               </div>
           </div>
           <div class="copyright">
               <p>&copy; 2025 MusiFlow. Todos los derechos reservados.</p>
           </div>
       </div>
   </footer>

   <!-- Bootstrap JS Bundle -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
   <!-- AOS Animation Library -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
   <!-- Login System -->
   <script src="resources/js/login.js"></script>
   <!-- Asistente IA -->
   <script src="resources/js/asistente.js"></script>
   <!-- Music API Integration -->
   <script src="resources/js/music-api.js"></script>
   
   <script>
       // Global variables for view mode and pagination
       let currentViewMode = 'list';
       let currentResults = [];
       let resultsPerPage = 20;
       let currentPage = 1;

       // Update status indicator
       document.addEventListener('DOMContentLoaded', () => {
           // Initialize AOS
           AOS.init({
               duration: 800,
               easing: 'ease-in-out',
               once: true
           });

           // Check login status and update UI
           checkLoginStatus();

           // Initialize enhanced features
           initializeEnhancedFeatures();
           
           // Listen for API initialization
           window.addEventListener('musicAPIInitialized', (event) => {
               const availableAPIs = event.detail.apis;
               updateAPIStatus(availableAPIs);
           });
       });

       function updateAPIStatus(availableAPIs) {
           const statusElement = document.getElementById('statusText');
           const statusAlert = document.querySelector('#spotifyStatus .alert');
           
           if (statusElement && statusAlert) {
               if (availableAPIs.length > 0) {
                   statusElement.innerHTML = `<i class="fas fa-check me-2"></i>Conectado con ${availableAPIs.join(', ')}`;
                   statusAlert.className = 'alert alert-success d-inline-block';
               } else {
                   statusElement.innerHTML = '<i class="fas fa-exclamation-triangle me-2"></i>Usando datos demo';
                   statusAlert.className = 'alert alert-warning d-inline-block';
               }
               
               // Hide after 5 seconds
               setTimeout(() => {
                   document.getElementById('spotifyStatus').style.display = 'none';
               }, 5000);
           }
       }

       function checkLoginStatus() {
           const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
           const userEmail = localStorage.getItem('userEmail');
           
           if (isLoggedIn && userEmail) {
               // Update login link
               const loginLink = document.getElementById('loginLink');
               loginLink.innerHTML = `<i class="fas fa-user"></i> ${userEmail}`;
               loginLink.href = 'cuenta.html';
               
               // Show featured section for logged users
               const featuredSection = document.getElementById('featuredSection');
               if (featuredSection) {
                   featuredSection.style.display = 'block';
               }
           }
       }

       function initializeEnhancedFeatures() {
           // Initialize ripple effect for genre cards
           initializeRippleEffect();
           
           // Initialize keyboard shortcuts
           initializeKeyboardShortcuts();
           
           // Initialize player controls with enhanced functionality
           initializePlayerControls();
           
           // Set default view mode
           document.getElementById('viewListBtn').classList.add('active');
       }

       function initializeRippleEffect() {
           const rippleElements = document.querySelectorAll('.ripple-effect');
           
           rippleElements.forEach(element => {
               element.addEventListener('click', function(e) {
                   const ripple = document.createElement('span');
                   ripple.classList.add('ripple');
                   this.appendChild(ripple);
                   
                   const rect = this.getBoundingClientRect();
                   const size = Math.max(rect.width, rect.height);
                   const x = e.clientX - rect.left - size / 2;
                   const y = e.clientY - rect.top - size / 2;
                   
                   ripple.style.width = size + 'px';
                   ripple.style.height = size + 'px';
                   ripple.style.left = x + 'px';
                   ripple.style.top = y + 'px';
                   
                   setTimeout(() => {
                       ripple.remove();
                   }, 600);
               });
           });
       }

       function initializeKeyboardShortcuts() {
           document.addEventListener('keydown', (e) => {
               // Only handle shortcuts if not typing in input fields
               if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
               
               switch(e.key.toLowerCase()) {
                   case ' ':
                       e.preventDefault();
                       if (window.musicExplorer && window.musicExplorer.togglePlayPause) {
                           window.musicExplorer.togglePlayPause();
                       }
                       break;
                   case 'arrowright':
                       e.preventDefault();
                       if (window.musicExplorer && window.musicExplorer.playNext) {
                           window.musicExplorer.playNext();
                       }
                       break;
                   case 'arrowleft':
                       e.preventDefault();
                       if (window.musicExplorer && window.musicExplorer.playPrevious) {
                           window.musicExplorer.playPrevious();
                       }
                       break;
                   case 'f':
                       e.preventDefault();
                       document.getElementById('searchInput').focus();
                       break;
               }
           });
       }

       function initializePlayerControls() {
           // Enhanced player controls
           const shuffleBtn = document.getElementById('shuffleBtn');
           const repeatBtn = document.getElementById('repeatBtn');
           const addToFavoritesBtn = document.getElementById('addToFavoritesBtn');
           
           if (shuffleBtn) {
               shuffleBtn.addEventListener('click', () => {
                   const isShuffled = shuffleBtn.classList.contains('active');
                   if (isShuffled) {
                       shuffleBtn.classList.remove('active');
                       shuffleBtn.style.color = '';
                   } else {
                       shuffleBtn.classList.add('active');
                       shuffleBtn.style.color = 'var(--acento-actual)';
                   }
                   console.log('Shuffle mode:', !isShuffled);
               });
           }
           
           if (repeatBtn) {
               repeatBtn.addEventListener('click', () => {
                   const isRepeating = repeatBtn.classList.contains('active');
                   if (isRepeating) {
                       repeatBtn.classList.remove('active');
                       repeatBtn.style.color = '';
                   } else {
                       repeatBtn.classList.add('active');
                       repeatBtn.style.color = 'var(--acento-actual)';
                   }
                   console.log('Repeat mode:', !isRepeating);
               });
           }
           
           if (addToFavoritesBtn) {
               addToFavoritesBtn.addEventListener('click', () => {
                   if (window.musicExplorer && window.musicExplorer.currentTrack) {
                       const trackId = window.musicExplorer.currentTrack.id;
                       window.musicExplorer.toggleFavorite(trackId);
                   }
               });
           }
       }

       // View mode functions
       function setViewMode(mode) {
           currentViewMode = mode;
           
           // Update button states
           const listBtn = document.getElementById('viewListBtn');
           const gridBtn = document.getElementById('viewGridBtn');
           
           if (mode === 'list') {
               listBtn.classList.add('active');
               gridBtn.classList.remove('active');
           } else {
               gridBtn.classList.add('active');
               listBtn.classList.remove('active');
           }
           
           // Refresh results display
           if (currentResults.length > 0 && window.musicExplorer) {
               window.musicExplorer.displayResults(currentResults);
           }
       }

       // Load more results functionality
       function loadMoreResults() {
           currentPage++;
           if (window.musicExplorer && window.musicExplorer.loadMoreResults) {
               window.musicExplorer.loadMoreResults(currentPage);
           }
       }

       // Search functionality
       function searchByGenre(genre) {
           if (window.musicExplorer && window.musicExplorer.searchByGenre) {
               window.musicExplorer.searchByGenre(genre);
           }
       }

       // Enhanced seek functionality
       function seekTo(event) {
           if (!window.musicExplorer || !window.musicExplorer.audio) return;
           
           const progressBar = event.currentTarget;
           const rect = progressBar.getBoundingClientRect();
           const percentage = (event.clientX - rect.left) / rect.width;
           const duration = window.musicExplorer.audio.duration;
           
           if (duration) {
               window.musicExplorer.audio.currentTime = duration * percentage;
           }
       }

       // Update progress bar
       function updateProgressBar() {
           if (!window.musicExplorer || !window.musicExplorer.audio) return;
           
           const current = window.musicExplorer.audio.currentTime;
           const duration = window.musicExplorer.audio.duration;
           const percentage = duration ? (current / duration) * 100 : 0;
           
           const progressBar = document.getElementById('progressBarMain');
           if (progressBar) {
               progressBar.style.width = `${percentage}%`;
           }
           
           // Update time displays
           const currentTime = document.getElementById('currentTime');
           const totalTime = document.getElementById('totalTime');
           
           if (currentTime) {
               currentTime.textContent = formatTime(current);
           }
           
           if (totalTime) {
               totalTime.textContent = formatTime(duration);
           }
       }

       function formatTime(seconds) {
           if (isNaN(seconds)) return '0:00';
           const minutes = Math.floor(seconds / 60);
           const secs = Math.floor(seconds % 60);
           return `${minutes}:${secs.toString().padStart(2, '0')}`;
       }

       // Update UI when track changes
       function updateCurrentTrackUI() {
           if (!window.musicExplorer || !window.musicExplorer.currentTrack) return;
           
           const track = window.musicExplorer.currentTrack;
           
           // Update favorite button state
           const favorites = JSON.parse(localStorage.getItem('favoriteSongs') || '[]');
           const isFavorite = favorites.find(fav => fav.id === track.id);
           
           const addToFavoritesBtn = document.getElementById('addToFavoritesBtn');
           if (addToFavoritesBtn) {
               addToFavoritesBtn.style.color = isFavorite ? '#e91e63' : '';
           }
           
           // Update title for better accessibility
           document.title = `${track.title} - ${track.artist} | MusiFlow`;
       }

       // Initialize periodic updates
       setInterval(() => {
           updateProgressBar();
           updateCurrentTrackUI();
       }, 1000);

       // Enhanced CSS for better visuals
       const enhancedCSS = `
           .search-results-container.grid-view .album-card {
               transition: all 0.3s ease;
               height: 100%;
               display: flex;
               flex-direction: column;
           }
           
           .search-results-container.grid-view .album-card:hover {
               transform: translateY(-5px);
               box-shadow: 0 10px 25px rgba(0,0,0,0.2);
           }
           
           .player-controls-current .control-btn-current.active {
               background: var(--acento-actual);
               color: white;
           }
           
           .time-display {
               font-size: 0.8rem;
               color: var(--texto-secundario);
               min-width: 40px;
               text-align: center;
           }
           
           .progress-bar-container {
               position: relative;
               cursor: pointer;
           }
           
           .progress-bar-container:hover #progressBarMain {
               background: var(--arcoiris-1);
           }
           
           .volume-slider-container {
               position: relative;
               cursor: pointer;
           }
           
           .volume-slider-container:hover #volumeProgress {
               background: var(--arcoiris-1);
           }
           
           .current-player {
               display: flex;
               align-items: center;
               gap: 1rem;
               padding: 1rem;
               background: rgba(18, 18, 18, 0.95);
               backdrop-filter: blur(20px);
               border-top: 1px solid rgba(255, 255, 255, 0.1);
           }
           
           .player-info-section {
               display: flex;
               align-items: center;
               gap: 1rem;
               flex: 1;
               min-width: 0;
           }
           
           .player-controls-section {
               display: flex;
               flex-direction: column;
               align-items: center;
               gap: 0.5rem;
           }
           
           .player-actions-section {
               display: flex;
               align-items: center;
               gap: 1rem;
           }
           
           @media (max-width: 768px) {
               .current-player {
                   flex-direction: column;
                   gap: 0.5rem;
                   padding: 0.75rem;
               }
               
               .player-info-section {
                   order: 1;
                   width: 100%;
                   justify-content: center;
               }
               
               .player-controls-section {
                   order: 2;
                   width: 100%;
               }
               
               .player-actions-section {
                   order: 3;
                   width: 100%;
                   justify-content: center;
               }
           }
           
           .ripple {
               position: absolute;
               border-radius: 50%;
               background-color: rgba(255, 255, 255, 0.3);
               transform: scale(0);
               animation: ripple 0.6s linear;
               pointer-events: none;
           }
           
           @keyframes ripple {
               to {
                   transform: scale(4);
                   opacity: 0;
               }
           }
       `;
       
       
       const style = document.createElement('style');
       style.textContent = enhancedCSS;
       document.head.appendChild(style);


// interactividad de los controles
document.addEventListener('DOMContentLoaded', () => {
    // Añadir efecto ripple a todos los botones
    const buttons = document.querySelectorAll('.control-btn-current, .play-btn-small, .btn-play');
    buttons.forEach(button => {
        button.classList.add('ripple-btn');
    });
    
    // Mejorar respuesta visual del volumen
    const volumeSlider = document.getElementById('volumeSlider');
    if (volumeSlider) {
        volumeSlider.addEventListener('mousemove', (e) => {
            const rect = volumeSlider.getBoundingClientRect();
            const percentage = (e.clientX - rect.left) / rect.width;
            volumeSlider.style.setProperty('--hover-width', `${percentage * 100}%`);
        });
    }
});
   </script>
</body>
</html>